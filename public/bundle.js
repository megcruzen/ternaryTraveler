(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _placeData = _interopRequireDefault(require("./placeData"));

var _placeList = _interopRequireDefault(require("./placeList"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// Contains all event listeners
const eventListeners = {
  // Add new article
  postPlace() {
    // Get user input (value of each field)
    let inputPlaceName = document.querySelector("#place_name").value;
    let inputPlaceDescription = document.querySelector("#place_description").value;
    let inputPlaceCost = document.querySelector("#place_cost").value;
    let inputPlaceCity = document.querySelector("#place_city").value; // Create new object with correct DB structure to represent a single place item:

    let placeToSave = {
      name: inputPlaceName,
      description: inputPlaceDescription,
      cost: inputPlaceCost,
      review: "",
      cityNameId: Number(inputPlaceCity) // Save article to database
      // Then rebuild the article list on DOM

    };

    _placeData.default.postNewPlace(placeToSave).then(() => {
      _placeList.default.buildList();
    });
  } // Delete article
  // Edit article


};
var _default = eventListeners;
exports.default = _default;

},{"./placeData":4,"./placeList":6}],2:[function(require,module,exports){
"use strict";

var _placeList = _interopRequireDefault(require("./placeList"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// Calls placeList.buildList function
_placeList.default.buildList();

},{"./placeList":6}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _placeList = _interopRequireDefault(require("./placeList"));

var _placeData = _interopRequireDefault(require("./placeData"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// Creates each place item that will be appended to DOM
const placeItem = {
  buildPlace(placeObj) {
    // argument passed from placeList
    // Build each place item
    // Create container for each item
    let placeSection = document.createElement("section"); // ex: foodArticle.setAttribute("id", `food--${foodObject.id}`)

    placeSection.setAttribute("class", "place_section"); // Name

    let placeName = document.createElement("h3");
    placeName.textContent = placeObj.name; // console.log(placeObj.name);
    // Description

    let placeDesc = document.createElement("p");
    placeDesc.textContent = placeObj.description; // Cost

    let placeCost = document.createElement("p");
    placeCost.textContent = placeObj.cost; // Review

    let placeReview = document.createElement("p");
    placeReview.textContent = placeObj.review; // City

    let placeCity = document.createElement("p");
    placeCity.textContent = placeObj.cityName.name; // Add button section

    let buttonHolder = document.createElement("div"); // edit button

    let editBtn = document.createElement("button");
    editBtn.textContent = "Edit";
    editBtn.setAttribute("class", "edit_place"); // GET
    // .then PUT

    editBtn.addEventListener("click", () => {
      let placeId = placeObj.id;

      _placeData.default.getPlace(placeId).then(response => {
        placeEditForm.createAndAppendForm(placeId, response);
      });
    }); // delete button

    let deleteBtn = document.createElement("button");
    deleteBtn.textContent = "Delete";
    deleteBtn.setAttribute("class", "delete_place");
    deleteBtn.addEventListener("click", () => {
      let placeId = placeObj.id;

      _placeData.default.deletePlace(placeId).then(() => {
        _placeList.default.buildList();
      });
    }); // Add "Edit" and "Delete" buttons to button holder

    buttonHolder.appendChild(editBtn);
    buttonHolder.appendChild(deleteBtn); // Append each element to placeSection

    placeSection.appendChild(placeName);
    placeSection.appendChild(placeDesc);
    placeSection.appendChild(placeCost);
    placeSection.appendChild(placeReview);
    placeSection.appendChild(placeCity);
    placeSection.appendChild(buttonHolder); // console.log(placeSection);

    return placeSection;
  }

};
var _default = placeItem;
exports.default = _default;

},{"./placeData":4,"./placeList":6}],4:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
// Contains fetch calls to GET, POST, DELETE, and PUT
const placeData = {
  // GET
  getPlaces() {
    return fetch("http://localhost:8088/places?_expand=cityName").then(response => response.json());
  },

  // POST
  postNewPlace(placeToSave) {
    return fetch("http://localhost:8088/places", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(placeToSave)
    });
  },

  // DELETE
  deletePlace(placeId) {
    return fetch(`http://localhost:8088/places/${placeId}`, {
      method: "DELETE",
      headers: {
        "Content-Type": "application/json"
      }
    });
  },

  // PUT
  getPlace(placeId) {
    return fetch(`http://localhost:8088/places/${placeId}`).then(response => response.json());
  },

  // Need the id to identify which place item we want to edit, as well as the new data we want to replace the existing data with. So we need two arguments for the method.
  putExistingPlace(placeId, placeToEdit) {
    return fetch(`http://localhost:8088/places/${placeId}`, {
      method: "PUT",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(placeToEdit)
    });
  }

};
var _default = placeData;
exports.default = _default;

},{}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _eventListeners = _interopRequireDefault(require("./eventListeners"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// Creates form to save a new place item to database
const placeForm = {
  buildForm() {
    // Create container, title, etc.
    let output = document.querySelector("#output");
    let formContainer = document.createElement("div");
    formContainer.setAttribute("id", "form_container");
    let formContainerTitle = document.createElement("h3");
    formContainerTitle.textContent = "Add New Place";
    formContainer.appendChild(formContainerTitle); // Create "Name" field

    let name = document.createElement("fieldset");
    let nameLabel = document.createElement("label");
    nameLabel.textContent = "Name";
    nameLabel.setAttribute("for", "place_name");
    let nameInput = document.createElement("input");
    nameInput.setAttribute("id", "place_name");
    nameInput.setAttribute("name", "place_name");
    name.appendChild(nameLabel);
    name.appendChild(nameInput); // Create "Description" field

    let description = document.createElement("fieldset");
    let descriptionLabel = document.createElement("label");
    descriptionLabel.textContent = "Description";
    descriptionLabel.setAttribute("for", "place_description");
    let descriptionInput = document.createElement("textarea");
    descriptionInput.setAttribute("id", "place_description");
    descriptionInput.setAttribute("name", "place_description");
    description.appendChild(descriptionLabel);
    description.appendChild(descriptionInput); // Create "Cost" field

    let cost = document.createElement("fieldset");
    let costLabel = document.createElement("label");
    costLabel.textContent = "Cost";
    costLabel.setAttribute("for", "place_cost");
    let costInput = document.createElement("input");
    costInput.setAttribute("id", "place_cost");
    costInput.setAttribute("name", "place_cost");
    cost.appendChild(costLabel);
    cost.appendChild(costInput); // Create "City" drop-down

    let city = document.createElement("fieldset");
    let cityLabel = document.createElement("label");
    cityLabel.textContent = "City";
    let cityInput = document.createElement("select");
    cityInput.setAttribute("id", "place_city");
    cityInput.setAttribute("name", "place_city");
    let cityOptions = `
            <option value="1">Los Angeles</option>
            <option value="2">San Francisco</option>
            <option value="3">Toronto</option>
        `;
    cityInput.innerHTML = cityOptions;
    city.appendChild(cityLabel);
    city.appendChild(cityInput); // Create "Save" button and attach event listener

    let saveBtn = document.createElement("button");
    saveBtn.textContent = "Save Place";
    saveBtn.setAttribute("class", "save_new_place"); // Attach event listener to button, to POST to database

    saveBtn.addEventListener("click", _eventListeners.default.postPlace); // Append each field/button to form container

    formContainer.appendChild(name);
    formContainer.appendChild(description);
    formContainer.appendChild(cost);
    formContainer.appendChild(city);
    formContainer.appendChild(saveBtn);
    output.appendChild(formContainer);
  }

};
var _default = placeForm;
exports.default = _default;

},{"./eventListeners":1}],6:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _placeData = _interopRequireDefault(require("./placeData"));

var _place = _interopRequireDefault(require("./place"));

var _placeForm = _interopRequireDefault(require("./placeForm"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// Builds out place list and appends to DOM
// import eventListeners from "./eventListeners"
const placeList = {
  buildList() {
    // Create container, title, etc.
    let output = document.querySelector("#output");
    output.innerHTML = "";
    let title = document.createElement("h1");
    title.textContent = "The Ternary Traveler";
    output.appendChild(title);
    let listContainer = document.createElement("div");
    listContainer.setAttribute("id", "list_container"); // Add form here

    _placeForm.default.buildForm(); // Create doc frag to hold each place item


    let placeDocFrag = document.createDocumentFragment(); // GET place data

    _placeData.default.getPlaces().then(allPlaces => {
      allPlaces.forEach(placeItem => {
        // forEach place, call function to build HTML for each one and append each to doc frag
        let newPlace = _place.default.buildPlace(placeItem); // newPlace = placeSection


        placeDocFrag.appendChild(newPlace);
      }); // Append the doc frag to the DOM

      listContainer.appendChild(placeDocFrag);
    });

    output.appendChild(listContainer);
  }

};
var _default = placeList;
exports.default = _default;

},{"./place":3,"./placeData":4,"./placeForm":5}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIuLi9zY3JpcHRzL2V2ZW50TGlzdGVuZXJzLmpzIiwiLi4vc2NyaXB0cy9tYWluLmpzIiwiLi4vc2NyaXB0cy9wbGFjZS5qcyIsIi4uL3NjcmlwdHMvcGxhY2VEYXRhLmpzIiwiLi4vc2NyaXB0cy9wbGFjZUZvcm0uanMiLCIuLi9zY3JpcHRzL3BsYWNlTGlzdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7QUNFQTs7QUFDQTs7OztBQUhBO0FBS0EsTUFBTSxjQUFjLEdBQUc7QUFFbkI7QUFDQSxFQUFBLFNBQVMsR0FBRztBQUVSO0FBQ0EsUUFBSSxjQUFjLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsYUFBdkIsRUFBc0MsS0FBM0Q7QUFDQSxRQUFJLHFCQUFxQixHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLG9CQUF2QixFQUE2QyxLQUF6RTtBQUNBLFFBQUksY0FBYyxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLGFBQXZCLEVBQXNDLEtBQTNEO0FBQ0EsUUFBSSxjQUFjLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsYUFBdkIsRUFBc0MsS0FBM0QsQ0FOUSxDQVFSOztBQUNBLFFBQUksV0FBVyxHQUFHO0FBQ2QsTUFBQSxJQUFJLEVBQUUsY0FEUTtBQUVkLE1BQUEsV0FBVyxFQUFFLHFCQUZDO0FBR2QsTUFBQSxJQUFJLEVBQUUsY0FIUTtBQUlkLE1BQUEsTUFBTSxFQUFFLEVBSk07QUFLZCxNQUFBLFVBQVUsRUFBRSxNQUFNLENBQUMsY0FBRCxDQUxKLENBUWxCO0FBQ0E7O0FBVGtCLEtBQWxCOztBQVVBLHVCQUFVLFlBQVYsQ0FBdUIsV0FBdkIsRUFDQyxJQURELENBQ00sTUFBTTtBQUNSLHlCQUFVLFNBQVY7QUFDSCxLQUhEO0FBSUgsR0ExQmtCLENBNEJuQjtBQUVBOzs7QUE5Qm1CLENBQXZCO2VBa0NlLGM7Ozs7OztBQ3ZDZjs7OztBQUVBO0FBQ0EsbUJBQVUsU0FBVjs7Ozs7Ozs7OztBQ0RBOztBQUNBOzs7O0FBSEE7QUFLQSxNQUFNLFNBQVMsR0FBRztBQUVkLEVBQUEsVUFBVSxDQUFDLFFBQUQsRUFBVztBQUFpQjtBQUVsQztBQUVBO0FBQ0EsUUFBSSxZQUFZLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsU0FBdkIsQ0FBbkIsQ0FMaUIsQ0FNakI7O0FBQ0EsSUFBQSxZQUFZLENBQUMsWUFBYixDQUEwQixPQUExQixFQUFtQyxlQUFuQyxFQVBpQixDQVNqQjs7QUFDQSxRQUFJLFNBQVMsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixJQUF2QixDQUFoQjtBQUNBLElBQUEsU0FBUyxDQUFDLFdBQVYsR0FBd0IsUUFBUSxDQUFDLElBQWpDLENBWGlCLENBWWpCO0FBRUE7O0FBQ0EsUUFBSSxTQUFTLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsR0FBdkIsQ0FBaEI7QUFDQSxJQUFBLFNBQVMsQ0FBQyxXQUFWLEdBQXdCLFFBQVEsQ0FBQyxXQUFqQyxDQWhCaUIsQ0FrQmpCOztBQUNBLFFBQUksU0FBUyxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLEdBQXZCLENBQWhCO0FBQ0EsSUFBQSxTQUFTLENBQUMsV0FBVixHQUF3QixRQUFRLENBQUMsSUFBakMsQ0FwQmlCLENBc0JqQjs7QUFDQSxRQUFJLFdBQVcsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixHQUF2QixDQUFsQjtBQUNBLElBQUEsV0FBVyxDQUFDLFdBQVosR0FBMEIsUUFBUSxDQUFDLE1BQW5DLENBeEJpQixDQTBCakI7O0FBQ0EsUUFBSSxTQUFTLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsR0FBdkIsQ0FBaEI7QUFDQSxJQUFBLFNBQVMsQ0FBQyxXQUFWLEdBQXdCLFFBQVEsQ0FBQyxRQUFULENBQWtCLElBQTFDLENBNUJpQixDQThCakI7O0FBQ0EsUUFBSSxZQUFZLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBbkIsQ0EvQmlCLENBaUNqQjs7QUFDQSxRQUFJLE9BQU8sR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixRQUF2QixDQUFkO0FBQ0EsSUFBQSxPQUFPLENBQUMsV0FBUixHQUFzQixNQUF0QjtBQUNBLElBQUEsT0FBTyxDQUFDLFlBQVIsQ0FBcUIsT0FBckIsRUFBOEIsWUFBOUIsRUFwQ2lCLENBcUNqQjtBQUNBOztBQUNBLElBQUEsT0FBTyxDQUFDLGdCQUFSLENBQXlCLE9BQXpCLEVBQWtDLE1BQU07QUFDcEMsVUFBSSxPQUFPLEdBQUcsUUFBUSxDQUFDLEVBQXZCOztBQUNBLHlCQUFVLFFBQVYsQ0FBbUIsT0FBbkIsRUFDQyxJQURELENBQ00sUUFBUSxJQUFJO0FBQ2QsUUFBQSxhQUFhLENBQUMsbUJBQWQsQ0FBa0MsT0FBbEMsRUFBMkMsUUFBM0M7QUFDSCxPQUhEO0FBSUgsS0FORCxFQXZDaUIsQ0ErQ2pCOztBQUNBLFFBQUksU0FBUyxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLFFBQXZCLENBQWhCO0FBQ0EsSUFBQSxTQUFTLENBQUMsV0FBVixHQUF3QixRQUF4QjtBQUNBLElBQUEsU0FBUyxDQUFDLFlBQVYsQ0FBdUIsT0FBdkIsRUFBZ0MsY0FBaEM7QUFDQSxJQUFBLFNBQVMsQ0FBQyxnQkFBVixDQUEyQixPQUEzQixFQUFvQyxNQUFNO0FBQ3RDLFVBQUksT0FBTyxHQUFHLFFBQVEsQ0FBQyxFQUF2Qjs7QUFDQSx5QkFBVSxXQUFWLENBQXNCLE9BQXRCLEVBQ0MsSUFERCxDQUNNLE1BQU07QUFDUiwyQkFBVSxTQUFWO0FBQ0gsT0FIRDtBQUlILEtBTkQsRUFuRGlCLENBMkRqQjs7QUFDQSxJQUFBLFlBQVksQ0FBQyxXQUFiLENBQXlCLE9BQXpCO0FBQ0EsSUFBQSxZQUFZLENBQUMsV0FBYixDQUF5QixTQUF6QixFQTdEaUIsQ0ErRGpCOztBQUNBLElBQUEsWUFBWSxDQUFDLFdBQWIsQ0FBeUIsU0FBekI7QUFDQSxJQUFBLFlBQVksQ0FBQyxXQUFiLENBQXlCLFNBQXpCO0FBQ0EsSUFBQSxZQUFZLENBQUMsV0FBYixDQUF5QixTQUF6QjtBQUNBLElBQUEsWUFBWSxDQUFDLFdBQWIsQ0FBeUIsV0FBekI7QUFDQSxJQUFBLFlBQVksQ0FBQyxXQUFiLENBQXlCLFNBQXpCO0FBQ0EsSUFBQSxZQUFZLENBQUMsV0FBYixDQUF5QixZQUF6QixFQXJFaUIsQ0F1RWpCOztBQUVBLFdBQU8sWUFBUDtBQUVIOztBQTdFYSxDQUFsQjtlQWlGZSxTOzs7Ozs7Ozs7O0FDdEZmO0FBRUEsTUFBTSxTQUFTLEdBQUc7QUFFZDtBQUNBLEVBQUEsU0FBUyxHQUFHO0FBQ1IsV0FBTyxLQUFLLENBQUMsK0NBQUQsQ0FBTCxDQUNOLElBRE0sQ0FDRCxRQUFRLElBQUksUUFBUSxDQUFDLElBQVQsRUFEWCxDQUFQO0FBRUgsR0FOYTs7QUFRZDtBQUNBLEVBQUEsWUFBWSxDQUFDLFdBQUQsRUFBYztBQUN0QixXQUFPLEtBQUssQ0FBQyw4QkFBRCxFQUFnQztBQUN4QyxNQUFBLE1BQU0sRUFBRSxNQURnQztBQUV4QyxNQUFBLE9BQU8sRUFBRTtBQUNMLHdCQUFnQjtBQURYLE9BRitCO0FBS3hDLE1BQUEsSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFMLENBQWUsV0FBZjtBQUxrQyxLQUFoQyxDQUFaO0FBT0gsR0FqQmE7O0FBbUJkO0FBQ0EsRUFBQSxXQUFXLENBQUMsT0FBRCxFQUFVO0FBQ2pCLFdBQU8sS0FBSyxDQUFFLGdDQUErQixPQUFRLEVBQXpDLEVBQTRDO0FBQ3RELE1BQUEsTUFBTSxFQUFFLFFBRDhDO0FBRXRELE1BQUEsT0FBTyxFQUFFO0FBQ0wsd0JBQWdCO0FBRFg7QUFGNkMsS0FBNUMsQ0FBWjtBQU1ILEdBM0JhOztBQTZCZDtBQUNBLEVBQUEsUUFBUSxDQUFDLE9BQUQsRUFBVTtBQUNkLFdBQU8sS0FBSyxDQUFFLGdDQUErQixPQUFRLEVBQXpDLENBQUwsQ0FDTixJQURNLENBQ0QsUUFBUSxJQUFJLFFBQVEsQ0FBQyxJQUFULEVBRFgsQ0FBUDtBQUVILEdBakNhOztBQW1DZDtBQUNBLEVBQUEsZ0JBQWdCLENBQUMsT0FBRCxFQUFVLFdBQVYsRUFBdUI7QUFDdkMsV0FBTyxLQUFLLENBQUUsZ0NBQStCLE9BQVEsRUFBekMsRUFBNEM7QUFDcEQsTUFBQSxNQUFNLEVBQUUsS0FENEM7QUFFcEQsTUFBQSxPQUFPLEVBQUU7QUFDTCx3QkFBZ0I7QUFEWCxPQUYyQztBQUtwRCxNQUFBLElBQUksRUFBRSxJQUFJLENBQUMsU0FBTCxDQUFlLFdBQWY7QUFMOEMsS0FBNUMsQ0FBWjtBQU9DOztBQTVDYSxDQUFsQjtlQStDZSxTOzs7Ozs7Ozs7OztBQy9DZjs7OztBQUZBO0FBSUEsTUFBTSxTQUFTLEdBQUc7QUFFZCxFQUFBLFNBQVMsR0FBRztBQUVSO0FBQ0EsUUFBSSxNQUFNLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsU0FBdkIsQ0FBYjtBQUNBLFFBQUksYUFBYSxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLEtBQXZCLENBQXBCO0FBQ0EsSUFBQSxhQUFhLENBQUMsWUFBZCxDQUEyQixJQUEzQixFQUFpQyxnQkFBakM7QUFDQSxRQUFJLGtCQUFrQixHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLElBQXZCLENBQXpCO0FBQ0EsSUFBQSxrQkFBa0IsQ0FBQyxXQUFuQixHQUFpQyxlQUFqQztBQUNBLElBQUEsYUFBYSxDQUFDLFdBQWQsQ0FBMEIsa0JBQTFCLEVBUlEsQ0FVUjs7QUFDQSxRQUFJLElBQUksR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixVQUF2QixDQUFYO0FBQ0EsUUFBSSxTQUFTLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsT0FBdkIsQ0FBaEI7QUFDQSxJQUFBLFNBQVMsQ0FBQyxXQUFWLEdBQXdCLE1BQXhCO0FBQ0EsSUFBQSxTQUFTLENBQUMsWUFBVixDQUF1QixLQUF2QixFQUE4QixZQUE5QjtBQUNBLFFBQUksU0FBUyxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLE9BQXZCLENBQWhCO0FBQ0EsSUFBQSxTQUFTLENBQUMsWUFBVixDQUF1QixJQUF2QixFQUE2QixZQUE3QjtBQUNBLElBQUEsU0FBUyxDQUFDLFlBQVYsQ0FBdUIsTUFBdkIsRUFBK0IsWUFBL0I7QUFDQSxJQUFBLElBQUksQ0FBQyxXQUFMLENBQWlCLFNBQWpCO0FBQ0EsSUFBQSxJQUFJLENBQUMsV0FBTCxDQUFpQixTQUFqQixFQW5CUSxDQXFCUjs7QUFDQSxRQUFJLFdBQVcsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixVQUF2QixDQUFsQjtBQUNBLFFBQUksZ0JBQWdCLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsT0FBdkIsQ0FBdkI7QUFDQSxJQUFBLGdCQUFnQixDQUFDLFdBQWpCLEdBQStCLGFBQS9CO0FBQ0EsSUFBQSxnQkFBZ0IsQ0FBQyxZQUFqQixDQUE4QixLQUE5QixFQUFxQyxtQkFBckM7QUFDQSxRQUFJLGdCQUFnQixHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLFVBQXZCLENBQXZCO0FBQ0EsSUFBQSxnQkFBZ0IsQ0FBQyxZQUFqQixDQUE4QixJQUE5QixFQUFvQyxtQkFBcEM7QUFDQSxJQUFBLGdCQUFnQixDQUFDLFlBQWpCLENBQThCLE1BQTlCLEVBQXNDLG1CQUF0QztBQUNBLElBQUEsV0FBVyxDQUFDLFdBQVosQ0FBd0IsZ0JBQXhCO0FBQ0EsSUFBQSxXQUFXLENBQUMsV0FBWixDQUF3QixnQkFBeEIsRUE5QlEsQ0FnQ1I7O0FBQ0EsUUFBSSxJQUFJLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsVUFBdkIsQ0FBWDtBQUNBLFFBQUksU0FBUyxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLE9BQXZCLENBQWhCO0FBQ0EsSUFBQSxTQUFTLENBQUMsV0FBVixHQUF3QixNQUF4QjtBQUNBLElBQUEsU0FBUyxDQUFDLFlBQVYsQ0FBdUIsS0FBdkIsRUFBOEIsWUFBOUI7QUFDQSxRQUFJLFNBQVMsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixPQUF2QixDQUFoQjtBQUNBLElBQUEsU0FBUyxDQUFDLFlBQVYsQ0FBdUIsSUFBdkIsRUFBNkIsWUFBN0I7QUFDQSxJQUFBLFNBQVMsQ0FBQyxZQUFWLENBQXVCLE1BQXZCLEVBQStCLFlBQS9CO0FBQ0EsSUFBQSxJQUFJLENBQUMsV0FBTCxDQUFpQixTQUFqQjtBQUNBLElBQUEsSUFBSSxDQUFDLFdBQUwsQ0FBaUIsU0FBakIsRUF6Q1EsQ0EyQ1I7O0FBQ0EsUUFBSSxJQUFJLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsVUFBdkIsQ0FBWDtBQUNBLFFBQUksU0FBUyxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLE9BQXZCLENBQWhCO0FBQ0EsSUFBQSxTQUFTLENBQUMsV0FBVixHQUF3QixNQUF4QjtBQUNBLFFBQUksU0FBUyxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLFFBQXZCLENBQWhCO0FBQ0EsSUFBQSxTQUFTLENBQUMsWUFBVixDQUF1QixJQUF2QixFQUE2QixZQUE3QjtBQUNBLElBQUEsU0FBUyxDQUFDLFlBQVYsQ0FBdUIsTUFBdkIsRUFBK0IsWUFBL0I7QUFDQSxRQUFJLFdBQVcsR0FBSTs7OztTQUFuQjtBQUtBLElBQUEsU0FBUyxDQUFDLFNBQVYsR0FBc0IsV0FBdEI7QUFDQSxJQUFBLElBQUksQ0FBQyxXQUFMLENBQWlCLFNBQWpCO0FBQ0EsSUFBQSxJQUFJLENBQUMsV0FBTCxDQUFpQixTQUFqQixFQXpEUSxDQTJEUjs7QUFDQSxRQUFJLE9BQU8sR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixRQUF2QixDQUFkO0FBQ0EsSUFBQSxPQUFPLENBQUMsV0FBUixHQUFzQixZQUF0QjtBQUNBLElBQUEsT0FBTyxDQUFDLFlBQVIsQ0FBcUIsT0FBckIsRUFBOEIsZ0JBQTlCLEVBOURRLENBZ0VSOztBQUNBLElBQUEsT0FBTyxDQUFDLGdCQUFSLENBQXlCLE9BQXpCLEVBQWtDLHdCQUFlLFNBQWpELEVBakVRLENBbUVSOztBQUVBLElBQUEsYUFBYSxDQUFDLFdBQWQsQ0FBMEIsSUFBMUI7QUFDQSxJQUFBLGFBQWEsQ0FBQyxXQUFkLENBQTBCLFdBQTFCO0FBQ0EsSUFBQSxhQUFhLENBQUMsV0FBZCxDQUEwQixJQUExQjtBQUNBLElBQUEsYUFBYSxDQUFDLFdBQWQsQ0FBMEIsSUFBMUI7QUFDQSxJQUFBLGFBQWEsQ0FBQyxXQUFkLENBQTBCLE9BQTFCO0FBRUEsSUFBQSxNQUFNLENBQUMsV0FBUCxDQUFtQixhQUFuQjtBQUNIOztBQTlFYSxDQUFsQjtlQWtGZSxTOzs7Ozs7Ozs7OztBQ3BGZjs7QUFDQTs7QUFDQTs7OztBQUpBO0FBS0E7QUFFQSxNQUFNLFNBQVMsR0FBRztBQUVkLEVBQUEsU0FBUyxHQUFHO0FBRVI7QUFDQSxRQUFJLE1BQU0sR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixTQUF2QixDQUFiO0FBQ0EsSUFBQSxNQUFNLENBQUMsU0FBUCxHQUFtQixFQUFuQjtBQUVBLFFBQUksS0FBSyxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLElBQXZCLENBQVo7QUFDQSxJQUFBLEtBQUssQ0FBQyxXQUFOLEdBQW9CLHNCQUFwQjtBQUNBLElBQUEsTUFBTSxDQUFDLFdBQVAsQ0FBbUIsS0FBbkI7QUFFQSxRQUFJLGFBQWEsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixLQUF2QixDQUFwQjtBQUNBLElBQUEsYUFBYSxDQUFDLFlBQWQsQ0FBMkIsSUFBM0IsRUFBaUMsZ0JBQWpDLEVBWFEsQ0FhUjs7QUFDQSx1QkFBVSxTQUFWLEdBZFEsQ0FnQlI7OztBQUNBLFFBQUksWUFBWSxHQUFHLFFBQVEsQ0FBQyxzQkFBVCxFQUFuQixDQWpCUSxDQW1CUjs7QUFDQSx1QkFBVSxTQUFWLEdBQ0MsSUFERCxDQUNNLFNBQVMsSUFBSTtBQUNmLE1BQUEsU0FBUyxDQUFDLE9BQVYsQ0FBa0IsU0FBUyxJQUFJO0FBQy9CO0FBQ0ksWUFBSSxRQUFRLEdBQUcsZUFBTSxVQUFOLENBQWlCLFNBQWpCLENBQWYsQ0FGMkIsQ0FFaUI7OztBQUM1QyxRQUFBLFlBQVksQ0FBQyxXQUFiLENBQXlCLFFBQXpCO0FBQ0gsT0FKRCxFQURlLENBT2Y7O0FBQ0EsTUFBQSxhQUFhLENBQUMsV0FBZCxDQUEwQixZQUExQjtBQUNILEtBVkQ7O0FBWUEsSUFBQSxNQUFNLENBQUMsV0FBUCxDQUFtQixhQUFuQjtBQUVIOztBQXBDYSxDQUFsQjtlQXdDZSxTIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLy8gQ29udGFpbnMgYWxsIGV2ZW50IGxpc3RlbmVyc1xuXG5pbXBvcnQgcGxhY2VEYXRhIGZyb20gXCIuL3BsYWNlRGF0YVwiXG5pbXBvcnQgcGxhY2VMaXN0IGZyb20gXCIuL3BsYWNlTGlzdFwiXG5cbmNvbnN0IGV2ZW50TGlzdGVuZXJzID0ge1xuXG4gICAgLy8gQWRkIG5ldyBhcnRpY2xlXG4gICAgcG9zdFBsYWNlKCkge1xuXG4gICAgICAgIC8vIEdldCB1c2VyIGlucHV0ICh2YWx1ZSBvZiBlYWNoIGZpZWxkKVxuICAgICAgICBsZXQgaW5wdXRQbGFjZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BsYWNlX25hbWVcIikudmFsdWU7XG4gICAgICAgIGxldCBpbnB1dFBsYWNlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BsYWNlX2Rlc2NyaXB0aW9uXCIpLnZhbHVlO1xuICAgICAgICBsZXQgaW5wdXRQbGFjZUNvc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BsYWNlX2Nvc3RcIikudmFsdWU7XG4gICAgICAgIGxldCBpbnB1dFBsYWNlQ2l0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGxhY2VfY2l0eVwiKS52YWx1ZTtcblxuICAgICAgICAvLyBDcmVhdGUgbmV3IG9iamVjdCB3aXRoIGNvcnJlY3QgREIgc3RydWN0dXJlIHRvIHJlcHJlc2VudCBhIHNpbmdsZSBwbGFjZSBpdGVtOlxuICAgICAgICBsZXQgcGxhY2VUb1NhdmUgPSB7XG4gICAgICAgICAgICBuYW1lOiBpbnB1dFBsYWNlTmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBpbnB1dFBsYWNlRGVzY3JpcHRpb24sXG4gICAgICAgICAgICBjb3N0OiBpbnB1dFBsYWNlQ29zdCxcbiAgICAgICAgICAgIHJldmlldzogXCJcIixcbiAgICAgICAgICAgIGNpdHlOYW1lSWQ6IE51bWJlcihpbnB1dFBsYWNlQ2l0eSlcbiAgICAgICAgICB9XG5cbiAgICAgICAgLy8gU2F2ZSBhcnRpY2xlIHRvIGRhdGFiYXNlXG4gICAgICAgIC8vIFRoZW4gcmVidWlsZCB0aGUgYXJ0aWNsZSBsaXN0IG9uIERPTVxuICAgICAgICBwbGFjZURhdGEucG9zdE5ld1BsYWNlKHBsYWNlVG9TYXZlKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBwbGFjZUxpc3QuYnVpbGRMaXN0KClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBEZWxldGUgYXJ0aWNsZVxuXG4gICAgLy8gRWRpdCBhcnRpY2xlXG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgZXZlbnRMaXN0ZW5lcnM7IiwiaW1wb3J0IHBsYWNlTGlzdCBmcm9tIFwiLi9wbGFjZUxpc3RcIjtcblxuLy8gQ2FsbHMgcGxhY2VMaXN0LmJ1aWxkTGlzdCBmdW5jdGlvblxucGxhY2VMaXN0LmJ1aWxkTGlzdCgpOyIsIi8vIENyZWF0ZXMgZWFjaCBwbGFjZSBpdGVtIHRoYXQgd2lsbCBiZSBhcHBlbmRlZCB0byBET01cblxuaW1wb3J0IHBsYWNlTGlzdCBmcm9tIFwiLi9wbGFjZUxpc3RcIlxuaW1wb3J0IHBsYWNlRGF0YSBmcm9tIFwiLi9wbGFjZURhdGFcIlxuXG5jb25zdCBwbGFjZUl0ZW0gPSB7XG5cbiAgICBidWlsZFBsYWNlKHBsYWNlT2JqKSB7ICAgICAgICAgICAgICAgIC8vIGFyZ3VtZW50IHBhc3NlZCBmcm9tIHBsYWNlTGlzdFxuXG4gICAgICAgIC8vIEJ1aWxkIGVhY2ggcGxhY2UgaXRlbVxuXG4gICAgICAgIC8vIENyZWF0ZSBjb250YWluZXIgZm9yIGVhY2ggaXRlbVxuICAgICAgICBsZXQgcGxhY2VTZWN0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlY3Rpb25cIik7XG4gICAgICAgIC8vIGV4OiBmb29kQXJ0aWNsZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBgZm9vZC0tJHtmb29kT2JqZWN0LmlkfWApXG4gICAgICAgIHBsYWNlU2VjdGlvbi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInBsYWNlX3NlY3Rpb25cIik7XG5cbiAgICAgICAgLy8gTmFtZVxuICAgICAgICBsZXQgcGxhY2VOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpO1xuICAgICAgICBwbGFjZU5hbWUudGV4dENvbnRlbnQgPSBwbGFjZU9iai5uYW1lO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhwbGFjZU9iai5uYW1lKTtcblxuICAgICAgICAvLyBEZXNjcmlwdGlvblxuICAgICAgICBsZXQgcGxhY2VEZXNjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICAgIHBsYWNlRGVzYy50ZXh0Q29udGVudCA9IHBsYWNlT2JqLmRlc2NyaXB0aW9uO1xuXG4gICAgICAgIC8vIENvc3RcbiAgICAgICAgbGV0IHBsYWNlQ29zdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICBwbGFjZUNvc3QudGV4dENvbnRlbnQgPSBwbGFjZU9iai5jb3N0O1xuXG4gICAgICAgIC8vIFJldmlld1xuICAgICAgICBsZXQgcGxhY2VSZXZpZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgcGxhY2VSZXZpZXcudGV4dENvbnRlbnQgPSBwbGFjZU9iai5yZXZpZXc7XG5cbiAgICAgICAgLy8gQ2l0eVxuICAgICAgICBsZXQgcGxhY2VDaXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICAgIHBsYWNlQ2l0eS50ZXh0Q29udGVudCA9IHBsYWNlT2JqLmNpdHlOYW1lLm5hbWU7XG5cbiAgICAgICAgLy8gQWRkIGJ1dHRvbiBzZWN0aW9uXG4gICAgICAgIGxldCBidXR0b25Ib2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgICAgIC8vIGVkaXQgYnV0dG9uXG4gICAgICAgIGxldCBlZGl0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgZWRpdEJ0bi50ZXh0Q29udGVudCA9IFwiRWRpdFwiO1xuICAgICAgICBlZGl0QnRuLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZWRpdF9wbGFjZVwiKTtcbiAgICAgICAgLy8gR0VUXG4gICAgICAgIC8vIC50aGVuIFBVVFxuICAgICAgICBlZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgcGxhY2VJZCA9IHBsYWNlT2JqLmlkO1xuICAgICAgICAgICAgcGxhY2VEYXRhLmdldFBsYWNlKHBsYWNlSWQpXG4gICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgcGxhY2VFZGl0Rm9ybS5jcmVhdGVBbmRBcHBlbmRGb3JtKHBsYWNlSWQsIHJlc3BvbnNlKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcblxuICAgICAgICAvLyBkZWxldGUgYnV0dG9uXG4gICAgICAgIGxldCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICBkZWxldGVCdG4udGV4dENvbnRlbnQgPSBcIkRlbGV0ZVwiO1xuICAgICAgICBkZWxldGVCdG4uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJkZWxldGVfcGxhY2VcIik7XG4gICAgICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgbGV0IHBsYWNlSWQgPSBwbGFjZU9iai5pZDtcbiAgICAgICAgICAgIHBsYWNlRGF0YS5kZWxldGVQbGFjZShwbGFjZUlkKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHBsYWNlTGlzdC5idWlsZExpc3QoKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcblxuICAgICAgICAvLyBBZGQgXCJFZGl0XCIgYW5kIFwiRGVsZXRlXCIgYnV0dG9ucyB0byBidXR0b24gaG9sZGVyXG4gICAgICAgIGJ1dHRvbkhvbGRlci5hcHBlbmRDaGlsZChlZGl0QnRuKTtcbiAgICAgICAgYnV0dG9uSG9sZGVyLmFwcGVuZENoaWxkKGRlbGV0ZUJ0bik7XG5cbiAgICAgICAgLy8gQXBwZW5kIGVhY2ggZWxlbWVudCB0byBwbGFjZVNlY3Rpb25cbiAgICAgICAgcGxhY2VTZWN0aW9uLmFwcGVuZENoaWxkKHBsYWNlTmFtZSk7XG4gICAgICAgIHBsYWNlU2VjdGlvbi5hcHBlbmRDaGlsZChwbGFjZURlc2MpO1xuICAgICAgICBwbGFjZVNlY3Rpb24uYXBwZW5kQ2hpbGQocGxhY2VDb3N0KTtcbiAgICAgICAgcGxhY2VTZWN0aW9uLmFwcGVuZENoaWxkKHBsYWNlUmV2aWV3KTtcbiAgICAgICAgcGxhY2VTZWN0aW9uLmFwcGVuZENoaWxkKHBsYWNlQ2l0eSk7XG4gICAgICAgIHBsYWNlU2VjdGlvbi5hcHBlbmRDaGlsZChidXR0b25Ib2xkZXIpO1xuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHBsYWNlU2VjdGlvbik7XG5cbiAgICAgICAgcmV0dXJuIHBsYWNlU2VjdGlvblxuXG4gICAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IHBsYWNlSXRlbTsiLCIvLyBDb250YWlucyBmZXRjaCBjYWxscyB0byBHRVQsIFBPU1QsIERFTEVURSwgYW5kIFBVVFxuXG5jb25zdCBwbGFjZURhdGEgPSB7XG5cbiAgICAvLyBHRVRcbiAgICBnZXRQbGFjZXMoKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC9wbGFjZXM/X2V4cGFuZD1jaXR5TmFtZVwiKVxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgfSxcblxuICAgIC8vIFBPU1RcbiAgICBwb3N0TmV3UGxhY2UocGxhY2VUb1NhdmUpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKFwiaHR0cDovL2xvY2FsaG9zdDo4MDg4L3BsYWNlc1wiLHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwbGFjZVRvU2F2ZSlcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8vIERFTEVURVxuICAgIGRlbGV0ZVBsYWNlKHBsYWNlSWQpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGBodHRwOi8vbG9jYWxob3N0OjgwODgvcGxhY2VzLyR7cGxhY2VJZH1gLCB7XG4gICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSxcblxuICAgIC8vIFBVVFxuICAgIGdldFBsYWNlKHBsYWNlSWQpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGBodHRwOi8vbG9jYWxob3N0OjgwODgvcGxhY2VzLyR7cGxhY2VJZH1gKVxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgfSxcblxuICAgIC8vIE5lZWQgdGhlIGlkIHRvIGlkZW50aWZ5IHdoaWNoIHBsYWNlIGl0ZW0gd2Ugd2FudCB0byBlZGl0LCBhcyB3ZWxsIGFzIHRoZSBuZXcgZGF0YSB3ZSB3YW50IHRvIHJlcGxhY2UgdGhlIGV4aXN0aW5nIGRhdGEgd2l0aC4gU28gd2UgbmVlZCB0d28gYXJndW1lbnRzIGZvciB0aGUgbWV0aG9kLlxuICAgIHB1dEV4aXN0aW5nUGxhY2UocGxhY2VJZCwgcGxhY2VUb0VkaXQpIHtcbiAgICByZXR1cm4gZmV0Y2goYGh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC9wbGFjZXMvJHtwbGFjZUlkfWAsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwbGFjZVRvRWRpdClcbiAgICB9KVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgcGxhY2VEYXRhOyIsIi8vIENyZWF0ZXMgZm9ybSB0byBzYXZlIGEgbmV3IHBsYWNlIGl0ZW0gdG8gZGF0YWJhc2VcblxuaW1wb3J0IGV2ZW50TGlzdGVuZXJzIGZyb20gXCIuL2V2ZW50TGlzdGVuZXJzXCJcblxuY29uc3QgcGxhY2VGb3JtID0ge1xuXG4gICAgYnVpbGRGb3JtKCkge1xuXG4gICAgICAgIC8vIENyZWF0ZSBjb250YWluZXIsIHRpdGxlLCBldGMuXG4gICAgICAgIGxldCBvdXRwdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI291dHB1dFwiKTtcbiAgICAgICAgbGV0IGZvcm1Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBmb3JtQ29udGFpbmVyLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZm9ybV9jb250YWluZXJcIik7XG4gICAgICAgIGxldCBmb3JtQ29udGFpbmVyVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDNcIik7XG4gICAgICAgIGZvcm1Db250YWluZXJUaXRsZS50ZXh0Q29udGVudCA9IFwiQWRkIE5ldyBQbGFjZVwiO1xuICAgICAgICBmb3JtQ29udGFpbmVyLmFwcGVuZENoaWxkKGZvcm1Db250YWluZXJUaXRsZSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIFwiTmFtZVwiIGZpZWxkXG4gICAgICAgIGxldCBuYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZpZWxkc2V0XCIpO1xuICAgICAgICBsZXQgbmFtZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICBuYW1lTGFiZWwudGV4dENvbnRlbnQgPSBcIk5hbWVcIjtcbiAgICAgICAgbmFtZUxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcInBsYWNlX25hbWVcIik7XG4gICAgICAgIGxldCBuYW1lSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgIG5hbWVJbnB1dC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInBsYWNlX25hbWVcIik7XG4gICAgICAgIG5hbWVJbnB1dC5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwicGxhY2VfbmFtZVwiKTtcbiAgICAgICAgbmFtZS5hcHBlbmRDaGlsZChuYW1lTGFiZWwpO1xuICAgICAgICBuYW1lLmFwcGVuZENoaWxkKG5hbWVJbnB1dCk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIFwiRGVzY3JpcHRpb25cIiBmaWVsZFxuICAgICAgICBsZXQgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZmllbGRzZXRcIik7XG4gICAgICAgIGxldCBkZXNjcmlwdGlvbkxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICBkZXNjcmlwdGlvbkxhYmVsLnRleHRDb250ZW50ID0gXCJEZXNjcmlwdGlvblwiO1xuICAgICAgICBkZXNjcmlwdGlvbkxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcInBsYWNlX2Rlc2NyaXB0aW9uXCIpO1xuICAgICAgICBsZXQgZGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtcbiAgICAgICAgZGVzY3JpcHRpb25JbnB1dC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInBsYWNlX2Rlc2NyaXB0aW9uXCIpO1xuICAgICAgICBkZXNjcmlwdGlvbklucHV0LnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJwbGFjZV9kZXNjcmlwdGlvblwiKTtcbiAgICAgICAgZGVzY3JpcHRpb24uYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb25MYWJlbCk7XG4gICAgICAgIGRlc2NyaXB0aW9uLmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uSW5wdXQpO1xuXG4gICAgICAgIC8vIENyZWF0ZSBcIkNvc3RcIiBmaWVsZFxuICAgICAgICBsZXQgY29zdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmaWVsZHNldFwiKTtcbiAgICAgICAgbGV0IGNvc3RMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgY29zdExhYmVsLnRleHRDb250ZW50ID0gXCJDb3N0XCI7XG4gICAgICAgIGNvc3RMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJwbGFjZV9jb3N0XCIpO1xuICAgICAgICBsZXQgY29zdElucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICBjb3N0SW5wdXQuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJwbGFjZV9jb3N0XCIpO1xuICAgICAgICBjb3N0SW5wdXQuc2V0QXR0cmlidXRlKFwibmFtZVwiLCBcInBsYWNlX2Nvc3RcIik7XG4gICAgICAgIGNvc3QuYXBwZW5kQ2hpbGQoY29zdExhYmVsKTtcbiAgICAgICAgY29zdC5hcHBlbmRDaGlsZChjb3N0SW5wdXQpO1xuXG4gICAgICAgIC8vIENyZWF0ZSBcIkNpdHlcIiBkcm9wLWRvd25cbiAgICAgICAgbGV0IGNpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZmllbGRzZXRcIik7XG4gICAgICAgIGxldCBjaXR5TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgIGNpdHlMYWJlbC50ZXh0Q29udGVudCA9IFwiQ2l0eVwiO1xuICAgICAgICBsZXQgY2l0eUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcbiAgICAgICAgY2l0eUlucHV0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwicGxhY2VfY2l0eVwiKTtcbiAgICAgICAgY2l0eUlucHV0LnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJwbGFjZV9jaXR5XCIpO1xuICAgICAgICBsZXQgY2l0eU9wdGlvbnMgPSBgXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMVwiPkxvcyBBbmdlbGVzPC9vcHRpb24+XG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMlwiPlNhbiBGcmFuY2lzY288L29wdGlvbj5cbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIzXCI+VG9yb250bzwvb3B0aW9uPlxuICAgICAgICBgXG4gICAgICAgIGNpdHlJbnB1dC5pbm5lckhUTUwgPSBjaXR5T3B0aW9ucztcbiAgICAgICAgY2l0eS5hcHBlbmRDaGlsZChjaXR5TGFiZWwpO1xuICAgICAgICBjaXR5LmFwcGVuZENoaWxkKGNpdHlJbnB1dCk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIFwiU2F2ZVwiIGJ1dHRvbiBhbmQgYXR0YWNoIGV2ZW50IGxpc3RlbmVyXG4gICAgICAgIGxldCBzYXZlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgc2F2ZUJ0bi50ZXh0Q29udGVudCA9IFwiU2F2ZSBQbGFjZVwiO1xuICAgICAgICBzYXZlQnRuLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwic2F2ZV9uZXdfcGxhY2VcIik7XG5cbiAgICAgICAgLy8gQXR0YWNoIGV2ZW50IGxpc3RlbmVyIHRvIGJ1dHRvbiwgdG8gUE9TVCB0byBkYXRhYmFzZVxuICAgICAgICBzYXZlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudExpc3RlbmVycy5wb3N0UGxhY2UpO1xuXG4gICAgICAgIC8vIEFwcGVuZCBlYWNoIGZpZWxkL2J1dHRvbiB0byBmb3JtIGNvbnRhaW5lclxuXG4gICAgICAgIGZvcm1Db250YWluZXIuYXBwZW5kQ2hpbGQobmFtZSk7XG4gICAgICAgIGZvcm1Db250YWluZXIuYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb24pO1xuICAgICAgICBmb3JtQ29udGFpbmVyLmFwcGVuZENoaWxkKGNvc3QpO1xuICAgICAgICBmb3JtQ29udGFpbmVyLmFwcGVuZENoaWxkKGNpdHkpO1xuICAgICAgICBmb3JtQ29udGFpbmVyLmFwcGVuZENoaWxkKHNhdmVCdG4pO1xuXG4gICAgICAgIG91dHB1dC5hcHBlbmRDaGlsZChmb3JtQ29udGFpbmVyKTtcbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgcGxhY2VGb3JtOyIsIi8vIEJ1aWxkcyBvdXQgcGxhY2UgbGlzdCBhbmQgYXBwZW5kcyB0byBET01cblxuaW1wb3J0IHBsYWNlRGF0YSBmcm9tIFwiLi9wbGFjZURhdGFcIjtcbmltcG9ydCBwbGFjZSBmcm9tIFwiLi9wbGFjZVwiXG5pbXBvcnQgcGxhY2VGb3JtIGZyb20gXCIuL3BsYWNlRm9ybVwiO1xuLy8gaW1wb3J0IGV2ZW50TGlzdGVuZXJzIGZyb20gXCIuL2V2ZW50TGlzdGVuZXJzXCJcblxuY29uc3QgcGxhY2VMaXN0ID0ge1xuXG4gICAgYnVpbGRMaXN0KCkge1xuXG4gICAgICAgIC8vIENyZWF0ZSBjb250YWluZXIsIHRpdGxlLCBldGMuXG4gICAgICAgIGxldCBvdXRwdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI291dHB1dFwiKTtcbiAgICAgICAgb3V0cHV0LmlubmVySFRNTCA9IFwiXCI7XG5cbiAgICAgICAgbGV0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgxXCIpO1xuICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IFwiVGhlIFRlcm5hcnkgVHJhdmVsZXJcIjtcbiAgICAgICAgb3V0cHV0LmFwcGVuZENoaWxkKHRpdGxlKTtcblxuICAgICAgICBsZXQgbGlzdENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGxpc3RDb250YWluZXIuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJsaXN0X2NvbnRhaW5lclwiKTtcblxuICAgICAgICAvLyBBZGQgZm9ybSBoZXJlXG4gICAgICAgIHBsYWNlRm9ybS5idWlsZEZvcm0oKTtcblxuICAgICAgICAvLyBDcmVhdGUgZG9jIGZyYWcgdG8gaG9sZCBlYWNoIHBsYWNlIGl0ZW1cbiAgICAgICAgbGV0IHBsYWNlRG9jRnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuICAgICAgICAvLyBHRVQgcGxhY2UgZGF0YVxuICAgICAgICBwbGFjZURhdGEuZ2V0UGxhY2VzKClcbiAgICAgICAgLnRoZW4oYWxsUGxhY2VzID0+IHtcbiAgICAgICAgICAgIGFsbFBsYWNlcy5mb3JFYWNoKHBsYWNlSXRlbSA9PiB7XG4gICAgICAgICAgICAvLyBmb3JFYWNoIHBsYWNlLCBjYWxsIGZ1bmN0aW9uIHRvIGJ1aWxkIEhUTUwgZm9yIGVhY2ggb25lIGFuZCBhcHBlbmQgZWFjaCB0byBkb2MgZnJhZ1xuICAgICAgICAgICAgICAgIGxldCBuZXdQbGFjZSA9IHBsYWNlLmJ1aWxkUGxhY2UocGxhY2VJdGVtKTsgLy8gbmV3UGxhY2UgPSBwbGFjZVNlY3Rpb25cbiAgICAgICAgICAgICAgICBwbGFjZURvY0ZyYWcuYXBwZW5kQ2hpbGQobmV3UGxhY2UpO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLy8gQXBwZW5kIHRoZSBkb2MgZnJhZyB0byB0aGUgRE9NXG4gICAgICAgICAgICBsaXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHBsYWNlRG9jRnJhZyk7XG4gICAgICAgIH0pXG5cbiAgICAgICAgb3V0cHV0LmFwcGVuZENoaWxkKGxpc3RDb250YWluZXIpO1xuXG4gICAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IHBsYWNlTGlzdDsiXX0=
